---
title: "CUNY SPS DATA 607 Project 2"
author: "Betsy Rosalen"
date: "March 11, 2018"
output:
  html_document:
    theme: cerulean
    toc: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Assignment Instructions

*The goal of this assignment is to give you practice in preparing different datasets for downstream analysis work.*

Your task is to:

1. Choose any three of the 'wide' datasets identified in the Week 5 Discussion items. For each of the three chosen datasets:
    - Create a .CSV file (or optionally, a MySQL database!) that includes all of the information included in the dataset. You're encouraged to use a 'wide' structure similar to how the information appears in the discussion item, so that you can practice tidying and transformations as described below.
    - Read the information from your .CSV file into R, and use tidyr and dplyr as needed to tidy and transform your data. [Most of your grade will be based on this step!]
    - Perform the analysis requested in the discussion item.
    - Your code should be in an R Markdown file, posted to rpubs.com, and should include narrative descriptions of your data cleanup work, analysis, and conclusions.

# Dataset Three - NYPD Crime Data

## Load the Raw Data into R from CSV File

```{R LoadMovieCSV}
library(RCurl) 
x <- getURL("https://raw.githubusercontent.com/betsyrosalen/DATA_607_Data_Acquisition_and_Management/master/Project2/DS3-1-seven-major-felony-offenses-2000-2017.csv") 
crime <-data.frame(read.csv(text=x, header=FALSE, stringsAsFactors = FALSE))
dim(crime)
str(crime)
head(crime, 12)
```

## Use tidyr to 'tidy' the data

First let's remove the two basically blank rows a the top and make the third row the header row.

```{r}
library(tidyr)
# make the third row the header row
colnames(crime) <- crime[3,]
# then remove the first 3 rows
crime <- crime[-c(1:3),]
# reset the row indexing
rownames(crime) <- NULL
```

OK, now let's check out the top and bottom of our data just to get a sense of what is there...

```{r}
head(crime, 12)
tail(crime, 24)
```

I can see the bottom of the data has some info that really belongs in a separate file or dataframe because it is data about our data, or metadata, not actually part of the dataset.  Looks like our data actually ends on row 624 and our "Statistical Notes" start on Row 628, so let's remove those rows and put the "Statistical Notes" in a separate dataframe for now just so we don't lose that info.

```{r}
# Put the Statistical notes in a separate dataframe 
StatisticalNotes <- crime[-(1:627),]

# Remove the Statistical Notes and blank rows from the bottom of the crime dataframe
crime <- crime[(1:624),]
```


